# mono_bill

todo:
- post_filter_hook: 删除打日志冗余代码

## 食用方法

1. 拥有python3环境, 依赖的包都很简单, 随便装装(等待一个好心人提供一个req.txt)
2. 从支付宝/微信/银行导出账单的csv(具体方法搜搜小红书), 放在`data/source/`文件夹下
    - 记得从每年的1月1号开始, 暂不支持跨年数据, 因为我懒
    - 无需改名，支持文件名模糊匹配， 但暂不支持多文件, 因为我懒
    - 支付宝/微信 app端操作
    - 工商/招商银行可以web端上下载单张卡的csv账单
    - `手动录入202x.csv`格式可以参考↓，文件名中包含"手动录入"即可, (gbk编码)
3. 运行`python3 main.py`, 结果会放在`data/`文件夹下, 
    - 一个`.xlsx`文件, 按月拆分, 全年汇总在`Sheet`中
    - 中间debug结果在`data/tmp/`文件夹下


## 手动录入格式


| 交易时间       | 交易对方 | 商品说明 | 金额    | 收支            | 交易分类      |
|------------|------|------|-------|---------------|-----------|
| xxxx/xx/xx |      |      | 带正负号  | 不管是不是收入都填"收入" | 填空，留个表头即可 |  
| 2024/1/1   | 张三   | 春天小姐 | -1999 | 收入            |           |

## 自定义输出alias

自定义`sinker_alias`(在`data/source/xxx_conf.json`中), 简化输出txt

```json
{
    "sinker": {
        "sinker_alias": {
            "收款方备注:二维码收款": "二维码收款",
            "上海宽娱数码科技有限公司": "b站",
            "北京抖音信息服务有限公司": "抖音"
        }
    }
}
```
